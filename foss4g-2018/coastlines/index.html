<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>reveal-md</title>
        <link rel="stylesheet" href="./css/reveal.css">
        <link rel="stylesheet" href="./css/theme/solarized.css" id="theme">
        <link rel="stylesheet" href="./css/highlight/zenburn.css">
        <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print">
          <link rel="stylesheet" href="./_assets/style.css">


    </head>
    <body>

        <div class="reveal">
            <div class="slides"><section  data-markdown><script type="text/template"><div>Coastline mapping</div>
<hr />
<div>
    <img src='radiant-logo.png' style="border:none; height:30%; width:30%; box-shadow:none;" />
    <div style="text-align: right; font-size: 80%">
        Matthew Hanson - @geoskeptic<br />
    </div>
</div>
</script></section><section ><section data-markdown><script type="text/template">
### What is a coastline?

- High tide, low tide?
- Mean High Water Spring (MHWS)

<div style="position:absolute"><img src='coastlines/zanzibar-tides.png' style="border:none; height:70%; width:70%;" /></div>
</script></section><section data-markdown><script type="text/template">
### Coastal changes

- Short term
    - Sever erosion
    - Major weather events
- Long term
    - Erosion
    - Climate change

Use cases

- Navigation
- Fishing
- Recreation
</script></section><section data-markdown><script type="text/template">
### Existing coastlines

- World Vector Shoreline Plus
    - Generated from Landsat
    - 1995
- GSHHG
    - Global Self-consistent, Hierarchical, High-resolution Geography
    - Combines WVS and other sources (lakes, Antarctic shores, rivers)
- OpenSreetMap
- Google maps
</script></section></section><section ><section data-markdown><script type="text/template">
## Public imagery for coastline mapping

- Sentinel-2
    - 10 meters
    - High revisit
    - only 2 years of data (with 10 day revisit)
    - only 1 year of data (with 5 day revisit)

- Landsat-8
    - 30 meters
    - 16 day revisit
    - 30+ year archive (Landsat 5, 7, 8)
</script></section><section data-markdown><script type="text/template">
## Searching and fetching imagery

https://github.com/sat-utils/

#### Landsat-8
```
$ sat-search --intersects zanzibar.geojson --datetime 2016-01-01/2016-12-31 \
    -c landsat-8-l1 --save landsat-scenes.geojson
```

#### Sentinel-2
```
$ sat-search --intersects zanzibar.geojson --datetime 2016-01-01/2016-12-31 \
    -c sentinel-2-l1c --save sentinel-scenes.geojson
```
</script></section><section data-markdown><script type="text/template">
## Tides

- Calculate normalized tide
    - Scene center lat/lon
    - Date and time
    - Current, min and max tide in the 24 hour preiod

Normalized-Tide = (current - min)/(max - min) * 100

  - Low-tide: 0% - 20%
  - High-tide: 80% - 100%

Tide Prediction library: https://github.com/venicegeo/bf-tideprediction
</script></section><section data-markdown><script type="text/template">
#### Download imagery

```
sat-search load low-tide-scenes.geojson \
    --download green nir --datadir low-tide-scenes/
```

```
sat-search load hi-tide-scenes.geojson \
    --download green nir --datadir hi-tide-scenes/
```
</script></section></section><section ><section data-markdown><script type="text/template">
## Coastline mapping workflow

- For each scene
    - Classify pixels as water or land
    - Vectorize raster into coastline vector
- Conflate coastline vectors
    - from all high tide scenes for high tide estimate
    - from all low tide scenes for low tide estimate
</script></section><section data-markdown><script type="text/template">
### Spectral reflectance

<div class="fragment" style="position:absolute"><img src='coastlines/spectral_signatures1.jpg' style="border:none; height:80%; width:80%"></div>
<div class="fragment" style="position:absolute"><img src='coastlines/spectral_signatures2.jpg' style="border:none; height:80%; width:80%"></div>
<div class="fragment" style="position:absolute"><img src='coastlines/ndwi.png' style="border:none; height:80%; width:80%;" /></div>
</script></section><section data-markdown><script type="text/template">
### Classification

- Calculate NDWI
- Mask out non-coastline regions
- Threshold
</script></section><section data-markdown><script type="text/template">
<div style="position:absolute"><img src='coastlines/coastlines-1.png' style="border:none; height:70%; width:70%;" /></div>
<div class="fragment" style="position:absolute"><img src='coastlines/coastlines-2.png' style="border:none; height:70%; width:70%;" /></div>
<div class="fragment" style="position:absolute"><img src='coastlines/coastlines-3.png' style="border:none; height:70%; width:70%;" /></div>
<div class="fragment" style="position:absolute"><img src='coastlines/coastlines-4.png' style="border:none; height:70%; width:70%;" /></div>
<div class="fragment" style="position:absolute"><img src='coastlines/coastlines-5.png' style="border:none; height:70%; width:70%;" /></div>
</script></section><section data-markdown><script type="text/template">
## Optimal threshold

Otsu's Threshold

<div style="position:absolute"><img src='coastlines/histogram.png' style="border:none; height:70%; width:70%;" /></div>
</script></section><section data-markdown><script type="text/template">
### Vectorization

- potrace: http://potrace.sourceforge.net/
- filtering nodata values

<div style="position:absolute"><img src='coastlines/coastlines-5.png' style="border:none; height:70%; width:70%;" /></div>
</script></section><section data-markdown><script type="text/template">
## Open-source software

NDWI Algorithm

https://github.com/venicegeo/bfalg-ndwi

- Python library
- Command line tool: bfalg-ndwi

coastlines-py

https://github.com/venicegeo/coastlines-py

    - General masking functions
    - Vectorization
</script></section></section><section ><section data-markdown><script type="text/template">
### NDWI results

<div class="fragment" style="position:absolute"><img src='coastlines/ndwi-images.gif' style="border:none; height:70%; width:70%;" /></div>
</script></section><section data-markdown><script type="text/template">
### Conflation 

https://github.com/venicegeo/conflator/

<div class="fragment" style="position:absolute"><img src='coastlines/lotide-all.png' style="border:none; height:70%; width:70%;" /></div>
<div class="fragment" style="position:absolute"><img src='coastlines/lotide.png' style="border:none; height:70%; width:70%;" /></div>


</script></section></section><section  data-markdown><script type="text/template">
### What's next ?

- Documentation
- Improve conflation
    - Averaging lines
    - More outlier filtering options
    - Merging segments
- Apply to road conflation</script></section></div>
        </div>

        <script src="./lib/js/head.min.js"></script>
        <script src="./js/reveal.js"></script>

        <script>
            function extend() {
              var target = {};
              for (var i = 0; i < arguments.length; i++) {
                var source = arguments[i];
                for (var key in source) {
                  if (source.hasOwnProperty(key)) {
                    target[key] = source[key];
                  }
                }
              }
              return target;
            }

            // Optional libraries used to extend on reveal.js
            var deps = [
              { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
              { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
              { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
              { src: './plugin/zoom-js/zoom.js', async: true },
              { src: './plugin/notes/notes.js', async: true },
              { src: './plugin/math/math.js', async: true }
            ];

            // default options to init reveal.js
            var defaultOptions = {
              controls: true,
              progress: true,
              history: true,
              center: true,
              transition: 'default', // none/fade/slide/convex/concave/zoom
              dependencies: deps
            };

            // options from URL query string
            var queryOptions = Reveal.getQueryHash() || {};

            var options = {};
            options = extend(defaultOptions, options, queryOptions);
        </script>


        <script>
            Reveal.initialize(options);
        </script>
    </body>
</html>
